#include <iostream>
#include <stdint.h>
#include <stdlib.h>
#include <sstream>
#include <string.h>

using namespace std;

int ndigits(int num);
char *int_to_char(int num);
char *soma(char *a, short int size1, char *b, short int size2, short int maxsize);

int main(){
    int n1=1, n2=2;

    short int size1=ndigits(n1), size2=ndigits(n2), maxsize;

    char *first=int_to_char(n1);
    char *second=int_to_char(n2);

    int it=0;
    int stopdigits=1000;
    while(1){

        maxsize = size1>size2 ? size1+1 : size2+1;
        char *result=soma(first,size1,second,size2,maxsize);


        int eq=0;
        while( result[maxsize-1-eq] == '0')
            eq++;
        maxsize-=eq;

        if (maxsize>=stopdigits)
            break;


        size1=size2;
        size2=maxsize;

        free(first);
        first = (char *) malloc(size1+1);
        first = strcpy(first,second); 

        free(second);
        second = (char *) malloc(size2);
        second = strncpy(second,result,maxsize);


        it++;

        //         free(result);
    }

    cout << "-- " << it+4 << endl;

    return 1;
}






int ndigits(int num){

    int digits=1;

    while( (num=num/10) > 0 )
        digits++;

    return digits;
}

char *int_to_char(int num){
    short int size = ndigits(num);
    char *buffer = (char *) malloc(size+1);

    for (int i=0; i<size; i++){
        buffer[i] = '0'+(num%10);
        num/=10;
    }

    return buffer;
}

char *soma(char *a, short int size1, char *b, short int size2, short int maxsize){


    char *buffer = (char *) malloc(maxsize);
    char *first  = (char *) malloc(maxsize);
    char *second = (char *) malloc(maxsize);

    for (int i=0; i<maxsize; i++){
        i<size1 ? first[i]=a[i] : first[i]='0';
        i<size2 ? second[i]=b[i] : second[i]='0';
        buffer[i]='0';
    }


    short int transporte=0;
    for (int i=0; i<maxsize-1; i++){
        
        int s = (int)(first[i]-'0') + (int)(second[i]-'0') + transporte;

        buffer[i] = s%10+'0';
        transporte=s/10;
    }

    buffer[maxsize-1] = transporte+'0';


    free(first);
    free(second);


    return buffer;
}

